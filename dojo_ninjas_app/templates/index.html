<!DOCTYPE html>
<html lang="en">
  <head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Learning Javascript</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
  </head>
  <script src="https://kit.fontawesome.com/3d481c9751.js" crossorigin="anonymous"></script>
  <body>

	<div class="container">
		<div class="row m-5">
			<div class="col d-flex justify-content-center">
				<form action="/add_dojo" method='post' style="width: 400px">
					{% csrf_token %}
					<h2 class="text-center mb-4">Add a Dojo</h2>
					<div class="mb-3 row">
					  <label for="dojo_name_input" class="form-label col">Name</label>
					  <input type="text" class="form-control col" id="dojo_name_input" name="dojo_name_input">
					</div>
					<div class="mb-3 row">
					  <label for="dojo_city_input" class="form-label col">City</label>
					  <input type="text" class="form-control col" id="dojo_city_input" name="dojo_city_input">
					</div>
					<div class="mb-3 row">
					  <label for="dojo_state_input" class="form-label col">State</label>
					  <input type="text" class="form-control col" id="dojo_state_input" name="dojo_state_input" maxlength="2">
					</div>
					<button type="submit" class="btn btn-primary">Submit</button>
				  </form>
			</div>
			<div class="col d-flex justify-content-center">
				<form action="/add_user" method='post' style="width: 400px">
					{% csrf_token %}
					<h2 class="text-center mb-4">Add a Ninja</h2>
					<div class="mb-3 row">
					  <label for="ninja_first_name_input" class="form-label col">First Name</label>
					  <input type="text" class="form-control col" id="ninja_first_name_input" name='ninja_first_name_input'>
					</div>
					<div class="mb-3 row">
					  <label for="ninja_last_name_input" class="form-label col">Last Name</label>
					  <input type="text" class="form-control col" id="ninja_last_name_input" name='ninja_last_name_input'>
					</div>
					<div class="mb-3 row">
					  <label for="ninja_dojo_select" class="form-label col">Dojo</label>
					  <select class="form-select form-control col" id='ninja_dojo_select' name='ninja_dojo_select'>
						  {% for dojo in all_the_dojos %}
						  <option value={{dojo.id}}>{{dojo.name}}</option>
						  {% endfor %}

					  </select>
					</div>
					<button type="submit" class="btn btn-primary">Submit</button>
				  </form>
			</div>
		</div>

		<hr />

		<div class="row justify-content-center align-items-center mx-auto"style="width: 600px">
			<h2 class="text-center mb-4">All the Dojos</h2>
			<div class="accordion accordion-flush" id="accordionFlushExample">
				{% for dojo in all_the_dojos %}
				<div class="accordion-item">
				  <h2 class="accordion-header" id="flush-heading{{dojo.id}}">
				
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse{{dojo.id}}" aria-expanded="false" aria-controls="flush-collapseOne">
						
						{{dojo.name}} <span class="badge px-2 mx-3 rounded-pill bg-primary">{{dojo.ninjas.all.count}}</span>
					</button>
				  </h2>
				    
				  <div id="flush-collapse{{dojo.id}}" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
					<div class="accordion-body">
						<ul class="list-group list-group-flush">
							{% for ninja in dojo.ninjas.all %}
							<li class="list-group-item">{{ninja.first_name}} {{ninja.last_name}}</li>
							{% endfor %}
						</ul>
					</div>
				  </div>
				</div>
				{% endfor %}
			  </div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
  </body>
</html>

